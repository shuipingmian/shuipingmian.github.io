(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,r=1;r<s.length;r++){var c=s[r];0!==i[c]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},i={app:0},n=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"108f":function(t,e,s){"use strict";var a=s("3b50"),i=s.n(a);i.a},"16b8":function(t,e,s){"use strict";var a=s("6d03"),i=s.n(a);i.a},"178d":function(t,e,s){},"187e":function(t,e,s){"use strict";var a=s("7c34"),i=s.n(a);i.a},"1fe4":function(t,e,s){},"20ee":function(t,e,s){},2459:function(t,e,s){},"2cca":function(t,e,s){},"2f63":function(t,e,s){"use strict";var a=s("ffd6"),i=s.n(a);i.a},"3a7e":function(t,e,s){"use strict";var a=s("402f"),i=s.n(a);i.a},"3b50":function(t,e,s){},"402f":function(t,e,s){},"424c":function(t,e,s){},"52c7":function(t,e,s){"use strict";var a=s("61d8"),i=s.n(a);i.a},"534e":function(t,e,s){"use strict";var a=s("2459"),i=s.n(a);i.a},"547b":function(t,e,s){"use strict";var a=s("5e8b"),i=s.n(a);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("V-Header",{attrs:{seller:t.seller}}),s("div",{staticClass:"tab-wrapper"},[s("tab",{attrs:{tabs:t.tabs}})],1)],1)},n=[],o=(s("ac1f"),s("841c"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header",on:{click:t.showDetail}},[s("div",{staticClass:"content-wrapper"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{width:"64",height:"64",src:t.seller.avatar}})]),s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[s("span",{staticClass:"brand"}),s("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])]),s("div",{staticClass:"description"},[t._v(t._s(t.seller.description)+"/"+t._s(t.seller.deliveryTime)+"分钟送达")]),t.seller.supports?s("div",{staticClass:"support"},[s("support-ico",{attrs:{size:1,type:t.seller.supports[0].type}}),s("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[0].description))])],1):t._e()]),t.seller.supports?s("div",{staticClass:"support-count"},[s("span",{staticClass:"count"},[t._v(t._s(t.seller.supports.length)+"个")]),s("i",{staticClass:"icon-keyboard_arrow_right"})]):t._e()]),s("div",{staticClass:"bulletin-wrapper"},[s("span",{staticClass:"bulletin-title"}),s("span",{staticClass:"bulletin-text"},[t._v(t._s(t.seller.bulletin))]),s("i",{staticClass:"icon-keyboard_arrow_right"})]),s("div",{staticClass:"background"},[s("img",{attrs:{src:t.seller.avatar,width:"100%",height:"100%"}})])])}),r=[],c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"support-ico",class:t.iconCls})},l=[],u=(s("99af"),s("a9e3"),{name:"support-ico",props:{size:{type:Number},type:{type:Number}},computed:{iconCls:function(){var t=["decrease","discount","special","invoice","guarantee"];return"icon-".concat(this.size," ").concat(t[this.type])}}}),d=u,p=(s("c78d"),s("2877")),f=Object(p["a"])(d,c,l,!1,null,"a32a2950",null),h=f.exports,v={name:"v-header",props:{seller:{type:Object,default:function(){return{}}}},methods:{showDetail:function(){this.headerDetailComp=this.headerDetailComp||this.$createHeaderDetail({$props:{seller:"seller"}}),this.headerDetailComp.show()}},components:{SupportIco:h}},m=v,C=(s("a734"),Object(p["a"])(m,o,r,!1,null,null,null)),_=C.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab"},[s("cube-tab-bar",{ref:"tabBar",staticClass:"border-bottom-1px",attrs:{showSlider:!0,useTransiton:!1,data:t.tabs},model:{value:t.selectedLabel,callback:function(e){t.selectedLabel=e},expression:"selectedLabel"}}),s("div",{staticClass:"slide-wrapper"},[s("cube-slide",{ref:"slide",attrs:{loop:!1,"auto-play":!1,"show-dots":!1,"initial-index":t.index,options:t.slideOptions},on:{change:t.onChange,scroll:t.onScroll}},t._l(t.tabs,(function(t,e){return s("cube-slide-item",{key:e},[s(t.component,{ref:"component",refInFor:!0,tag:"component",attrs:{data:t.data}})],1)})),1)],1)],1)},y=[],g=(s("c740"),{name:"tab",props:{tabs:{type:Array,default:function(){return[]}},initialIndex:{type:Number,default:0}},components:{},data:function(){return{index:this.initialIndex,slideOptions:{listenScroll:!0,probeType:3,directionLockThreshold:0}}},watch:{},computed:{selectedLabel:{get:function(){return this.tabs[this.index].label},set:function(t){this.index=this.tabs.findIndex((function(e){return e.label===t}))}}},methods:{onChange:function(t){this.index=t;var e=this.$refs.component[t];e.fetch&&e.fetch()},onScroll:function(t){var e=this.$refs.tabBar.$el.clientWidth,s=this.$refs.slide.slide.scrollerWidth,a=-t.x/s*e;this.$refs.tabBar.setSliderTransform(a)}},created:function(){},mounted:function(){this.onChange(this.index)}}),w=g,x=(s("2f63"),Object(p["a"])(w,b,y,!1,null,"7607a204",null)),k=x.exports,S=s("bc3a"),$=s.n(S),T="http://47.103.117.222:12388/",O=0;function P(t){return function(e){return $.a.get(T+t,{params:e}).then((function(t){var e=t.data,s=e.errno,a=e.data;if(s===O)return a})).catch((function(){}))}}var j=P("api/seller"),F=P("api/goods"),N=P("api/ratings"),E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goods"},[s("div",{staticClass:"scroll-nav-wrapper"},[t.goods.length?s("cube-scroll-nav",{attrs:{side:!0,data:t.goods,options:t.scrollOptions},scopedSlots:t._u([{key:"bar",fn:function(e){return[s("cube-scroll-nav-bar",{attrs:{direction:"vertical",labels:e.labels,txts:t.barTxts,current:e.current},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"text"},[e.txt.type>=1?s("supportIco",{attrs:{size:3,type:e.txt.type}}):t._e(),s("span",[t._v(t._s(e.txt.name))]),e.txt.count?s("span",{staticClass:"num"},[s("bubble",{attrs:{num:e.txt.count}})],1):t._e()],1)]}}],null,!0)})]}}],null,!1,878441843)},t._l(t.goods,(function(e){return s("cube-scroll-nav-panel",{key:e.name,attrs:{label:e.name,title:e.name}},[s("ul",t._l(e.foods,(function(e){return s("li",{key:e.name,staticClass:"food-item",on:{click:function(s){return t.selectFood(e)}}},[s("div",{staticClass:"icon"},[s("img",{attrs:{width:"57",height:"57",src:e.icon}})]),s("div",{staticClass:"content"},[s("h2",{staticClass:"name"},[t._v(t._s(e.name))]),s("p",{staticClass:"desc"},[t._v(t._s(e.description))]),s("div",{staticClass:"extra"},[s("span",{staticClass:"count"},[t._v("月售"+t._s(e.sellCount)+"份")]),s("span",[t._v("好评率"+t._s(e.rating)+"%")])]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(e.price))]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(e.oldPrice))])]),s("div",{staticClass:"cart-control-wrapper"},[s("CartControl",{attrs:{food:e},on:{add:t.onAdd}})],1)])])})),0)])})),1):t._e()],1),s("div",{staticClass:"shop-cart-wrapper"},[s("shopCart",{ref:"shopCart",attrs:{deliveryPrice:t.seller.deliveryPrice,minPrice:t.seller.minPrice,selectFoods:t.selectFoods}})],1)])},L=[],D=(s("4160"),s("b0c0"),s("159b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shopcart"},[s("div",{staticClass:"content",on:{click:t.toggleList}},[s("div",{staticClass:"content-left"},[s("div",{staticClass:"logo-wrapper"},[s("div",{staticClass:"logo",class:{highlight:t.totalCount>0}},[s("i",{staticClass:"icon-shopping_cart",class:{highlight:t.totalCount>0}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],staticClass:"num"},[s("bubble",{attrs:{num:t.totalCount}})],1)]),s("div",{staticClass:"price",class:{highlight:t.totalPrice>0}},[t._v("￥"+t._s(t.totalPrice))]),s("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.deliveryPrice)+"元")])]),s("div",{staticClass:"content-right"},[s("div",{staticClass:"pay",class:t.payClass,on:{click:function(e){return e.stopPropagation(),t.pay(e)}}},[t._v(" "+t._s(t.payDesc)+" ")])])]),s("div",{staticClass:"ball-container"},t._l(t.balls,(function(e,a){return s("div",{key:a},[s("transition",{on:{"before-enter":t.beforeDrop,enter:t.dropping,"after-enter":t.afterDrop}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"ball.show"}],staticClass:"ball"},[s("div",{staticClass:"inner inner-hook"})])])],1)})),0)])}),z=[],B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"bubble"},[t._v(" "+t._s(t.num)+" ")])},R=[],M={name:"bubble",props:{num:{type:Number}}},A=M,I=(s("3a7e"),Object(p["a"])(A,B,R,!1,null,"6885cdb7",null)),Y=I.exports,H=10,J="inner-hook";function U(){for(var t=[],e=0;e<H;e++)t.push({show:!1});return t}var V={name:"shop-cart",props:{selectFoods:{type:Array,default:function(){return[]}},deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0},sticky:{type:Boolean,default:!1},fold:{type:Boolean,default:!0}},data:function(){return{balls:U(),listFold:this.fold}},created:function(){this.dropBalls=[]},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach((function(e){t+=e.price*e.count})),t},totalCount:function(){var t=0;return this.selectFoods.forEach((function(e){t+=e.count})),t},payDesc:function(){if(0===this.totalPrice)return"￥".concat(this.minPrice,"元起送");if(this.totalPrice<this.minPrice){var t=this.minPrice-this.totalPrice;return"还差￥".concat(t,"元起送")}return"去结算"},payClass:function(){return!this.totalCount||this.totalPrice<this.minPrice?"not-enough":"enough"}},methods:{toggleList:function(){if(this.listFold){if(!this.totalCount)return;this.listFold=!1,this._showShopCartList(),this._showShopCartSticky()}else this.listFold=!0,this._hideShopCartList()},pay:function(t){this.totalPrice<this.minPrice||(this.$createDialog({title:"支付",content:"您需要支付".concat(this.totalPrice,"元")}).show(),t.stopPropagation())},drop:function(t){for(var e=0;e<this.balls.length;e++){var s=this.balls[e];if(!s.show)return s.show=!0,s.el=t,void this.dropBalls.push(s)}},beforeDrop:function(t){var e=this.dropBalls[this.dropBalls.length-1],s=e.el.getBoundingClientRect(),a=s.left-32,i=-(window.innerHeight-s.top-22);t.style.display="",t.style.transform=t.style.webkitTransform="translate3d(0,".concat(i,"px,0)");var n=t.getElementsByClassName(J)[0];n.style.transform=n.style.webkitTransform="translate3d(".concat(a,"px,0,0)")},dropping:function(t,e){this._reflow=document.body.offsetHeight,t.style.transform=t.style.webkitTransform="translate3d(0,0,0)";var s=t.getElementsByClassName(J)[0];s.style.transform=s.style.webkitTransform="translate3d(0,0,0)",t.addEventListener("transitionend",e)},afterDrop:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")},_showShopCartList:function(){var t=this;this.shopCartListComp=this.shopCartListComp||this.$createShopCartList({$props:{selectFoods:"selectFoods"},$events:{hide:function(){t.listFold=!0},leave:function(){t._hideShopCartSticky()},add:function(e){t.shopCartStickyComp.drop(e)}}}),this.shopCartListComp.show()},_showShopCartSticky:function(){this.shopCartStickyComp=this.shopCartStickyComp||this.$createShopCartSticky({$props:{selectFoods:"selectFoods",deliveryPrice:"deliveryPrice",minPrice:"minPrice",fold:"listFold",list:this.shopCartListComp}}),this.shopCartStickyComp.show()},_hideShopCartList:function(){var t=this.sticky?this.$parent.list:this.shopCartListComp;t.hide&&t.hide()},_hideShopCartSticky:function(){this.shopCartStickyComp.hide()}},watch:{fold:function(t){this.listFold=t},totalCount:function(t){this.fold||0!==t||this._hideShopCartList()}},components:{Bubble:Y}},W=V,X=(s("77ce"),Object(p["a"])(W,D,z,!1,null,"6758167a",null)),q=X.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cartcontrol"},[s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-decrease",on:{click:function(e){return e.stopPropagation(),t.decrease(e)}}},[s("span",{staticClass:"inner icon-remove_circle_outline"})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),s("div",{staticClass:"cart-add icon-add_circle",on:{click:function(e){return e.stopPropagation(),t.add(e)}}})],1)},K=[],Q="add",Z={name:"cartcontrol",components:{},props:{food:{type:Object}},data:function(){return{}},watch:{},computed:{},methods:{add:function(t){this.food.count?this.food.count++:this.$set(this.food,"count",1),this.$emit(Q,t.target)},decrease:function(){this.food.count&&this.food.count--}},created:function(){},mounted:function(){}},tt=Z,et=(s("e990"),Object(p["a"])(tt,G,K,!1,null,"25ffadd4",null)),st=et.exports,at={name:"goods",components:{shopCart:q,CartControl:st,supportIco:h,bubble:Y},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{goods:[],selectedFood:{},scrollOptions:{click:!1,directionLockThreshold:0}}},watch:{},computed:{barTxts:function(){var t=[];return this.goods.forEach((function(e){var s=e.type,a=e.name,i=e.foods,n=0;i.forEach((function(t){n+=t.count||0})),t.push({type:s,name:a,count:n})})),t},seller:function(){return this.data.seller},selectFoods:function(){var t=[];return this.goods.forEach((function(e){e.foods.forEach((function(e){e.count&&t.push(e)}))})),t}},methods:{fetch:function(){var t=this;this.fetched||(this.fetched=!0,F({id:this.seller.id}).then((function(e){t.goods=e})))},selectFood:function(t){this.selectedFood=t,this._showFood(),this._showShopCartSticky()},onAdd:function(t){this.$refs.shopCart.drop(t)},_showFood:function(){var t=this;this.foodComp=this.foodComp||this.$createFood({$props:{food:"selectedFood"},$events:{add:function(e){t.shopCartStickyComp.drop(e)},leave:function(){t._hideShopCartSticky()}}}),this.foodComp.show()},_showShopCartSticky:function(){this.shopCartStickyComp=this.shopCartStickyComp||this.$createShopCartSticky({$props:{selectFoods:"selectFoods",deliveryPrice:this.seller.deliveryPrice,minPrice:this.seller.minPrice,fold:!0}}),this.shopCartStickyComp.show()},_hideShopCartSticky:function(){this.shopCartStickyComp.hide()}},created:function(){}},it=at,nt=(s("187e"),Object(p["a"])(it,E,L,!1,null,"4c8f5e6c",null)),ot=nt.exports,rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("cube-scroll",{ref:"scroll",staticClass:"ratings",attrs:{options:t.scrollOptions}},[s("div",{staticClass:"ratings-content"},[s("div",{staticClass:"overview"},[s("div",{staticClass:"overview-left"},[s("h1",{staticClass:"score"},[t._v(t._s(t.seller.score))]),s("div",{staticClass:"title"},[t._v("综合评分")]),s("div",{staticClass:"rank"},[t._v("高于周边商家"+t._s(t.seller.rankRate)+"%")])]),s("div",{staticClass:"overview-right"},[s("div",{staticClass:"score-wrapper"},[s("span",{staticClass:"title"},[t._v("服务态度")]),s("star",{attrs:{size:36,score:t.seller.serviceScore}}),s("span",{staticClass:"score"},[t._v(t._s(t.seller.serviceScore))])],1),s("div",{staticClass:"score-wrapper"},[s("span",{staticClass:"title"},[t._v("商品评分")]),s("star",{attrs:{size:36,score:t.seller.foodScore}}),s("span",{staticClass:"score"},[t._v(t._s(t.seller.foodScore))])],1),s("div",{staticClass:"delivery-wrapper"},[s("span",{staticClass:"title"},[t._v("送达时间")]),s("span",{staticClass:"delivery"},[t._v(t._s(t.seller.deliveryTime)+"分钟")])])])]),s("split"),s("rating-select",{attrs:{selectType:t.selectType,onlyContent:t.onlyContent,ratings:t.ratings},on:{select:t.onSelect,toggle:t.onToggle}}),s("div",{staticClass:"rating-wrapper"},[s("ul",t._l(t.computedRatings,(function(e,a){return s("li",{key:a,staticClass:"rating-item border-bottom-1px"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{width:"28",height:"28",src:e.avatar}})]),s("div",{staticClass:"content"},[s("h1",{staticClass:"name"},[t._v(t._s(e.username))]),s("div",{staticClass:"star-wrapper"},[s("star",{attrs:{size:24,score:e.score}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.deliveryTime,expression:"rating.deliveryTime"}],staticClass:"delivery"},[t._v(t._s(e.deliveryTime))])],1),s("p",{staticClass:"text"},[t._v(t._s(e.text))]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.recommend&&e.recommend.length,expression:"rating.recommend && rating.recommend.length"}],staticClass:"recommend"},[s("span",{staticClass:"icon-thumb_up"}),t._l(e.recommend,(function(e,a){return s("span",{key:a,staticClass:"item"},[t._v(" "+t._s(e)+" ")])}))],2),s("div",{staticClass:"time"},[t._v(" "+t._s(t.format(e.rateTime))+" ")])])])})),0)])],1)])},ct=[],lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"star",class:t.starType},t._l(t.itemClasses,(function(t,e){return s("span",{key:e,staticClass:"star-item",class:t})})),0)},ut=[],dt=5,pt="on",ft="half",ht="off",vt={props:{size:{type:Number},score:{type:Number}},computed:{starType:function(){return"star-"+this.size},itemClasses:function(){for(var t=[],e=Math.floor(2*this.score)/2,s=e%1!==0,a=Math.floor(e),i=0;i<a;i++)t.push(pt);s&&t.push(ft);while(t.length<dt)t.push(ht);return t}}},mt=vt,Ct=(s("5717"),Object(p["a"])(mt,lt,ut,!1,null,null,null)),_t=Ct.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rating-select"},[s("div",{staticClass:"rating-type border-bottom-1px"},[s("span",{staticClass:"block positive",class:{active:2===t.selectType},on:{click:function(e){return t.select(2)}}},[t._v(t._s(t.desc.all)),s("span",{staticClass:"count"},[t._v(t._s(t.ratings.length))])]),s("span",{staticClass:"block positive",class:{active:0===t.selectType},on:{click:function(e){return t.select(0)}}},[t._v(t._s(t.desc.positive)),s("span",{staticClass:"count"},[t._v(t._s(t.positives.length))])]),s("span",{staticClass:"block negative",class:{active:1===t.selectType},on:{click:function(e){return t.select(1)}}},[t._v(t._s(t.desc.negative)),s("span",{staticClass:"count"},[t._v(t._s(t.negatives.length))])])]),s("div",{staticClass:"switch",class:{on:t.onlyContent},on:{click:t.toggleContent}},[s("span",{staticClass:"icon-check_circle"}),s("span",{staticClass:"text"},[t._v("只看有内容的评价")])])])},yt=[],gt=(s("4de4"),0),wt=1,xt=2,kt="toggle",St="select",$t={props:{ratings:{type:Array,default:function(){return[]}},selectType:{type:Number,default:xt},onlyContent:{type:Boolean,default:!1},desc:{type:Object,default:function(){return{all:"全部",positive:"满意",negative:"不满意"}}}},computed:{positives:function(){return this.ratings.filter((function(t){return t.rateType===gt}))},negatives:function(){return this.ratings.filter((function(t){return t.rateType===wt}))}},methods:{select:function(t){this.$emit(St,t)},toggleContent:function(){this.$emit(kt)}}},Tt=$t,Ot=(s("8f0f"),Object(p["a"])(Tt,bt,yt,!1,null,null,null)),Pt=Ot.exports,jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"split"})},Ft=[],Nt={name:"split",components:{},props:{},data:function(){return{}},watch:{},computed:{},methods:{},created:function(){},mounted:function(){}},Et=Nt,Lt=(s("b771"),Object(p["a"])(Et,jt,Ft,!1,null,"49107d84",null)),Dt=Lt.exports,zt=2,Bt={data:function(){return{selectType:zt,onlyContent:!0}},computed:{computedRatings:function(){var t=this,e=[];return this.ratings.forEach((function(s){t.onlyContent&&!s.text||t.selectType!==zt&&s.rateType!==t.selectType||e.push(s)})),e}},methods:{onSelect:function(t){this.selectType=t},onToggle:function(){this.onlyContent=!this.onlyContent}}},Rt=s("c1df"),Mt=s.n(Rt),At={name:"ratings",mixins:[Bt],props:{data:{type:Object}},data:function(){return{ratings:[],scrollOptions:{click:!1,directionLockThreshold:0}}},computed:{seller:function(){return this.data.seller||{}}},methods:{fetch:function(){var t=this;this.fetched||(this.fetched=!0,N({id:this.seller.id}).then((function(e){t.ratings=e})))},format:function(t){return Mt()(t).format("YYYY-MM-DD hh:mm")}},components:{Star:_t,Split:Dt,RatingSelect:Pt},watch:{selectType:function(){var t=this;this.$nextTick((function(){t.$refs.scroll.refresh()}))}}},It=At,Yt=(s("52c7"),Object(p["a"])(It,rt,ct,!1,null,"a62e21da",null)),Ht=Yt.exports,Jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("cube-scroll",{staticClass:"seller",attrs:{options:t.sellerScrollOptions}},[s("div",{staticClass:"seller-content"},[s("div",{staticClass:"overview"},[s("h1",{staticClass:"title"},[t._v(t._s(t.seller.name))]),s("div",{staticClass:"desc border-bottom-1px"},[s("star",{attrs:{size:36,score:t.seller.score}}),s("span",{staticClass:"text"},[t._v("("+t._s(t.seller.ratingCount)+")")]),s("span",{staticClass:"text"},[t._v("月售"+t._s(t.seller.sellCount)+"单")])],1),s("ul",{staticClass:"remark"},[s("li",{staticClass:"block"},[s("h2",[t._v("起送价")]),s("div",{staticClass:"content"},[s("span",{staticClass:"stress"},[t._v(t._s(t.seller.minPrice))]),t._v("元 ")])]),s("li",{staticClass:"block"},[s("h2",[t._v("商家配送")]),s("div",{staticClass:"content"},[s("span",{staticClass:"stress"},[t._v(t._s(t.seller.deliveryPrice))]),t._v("元 ")])]),s("li",{staticClass:"block"},[s("h2",[t._v("平均配送时间")]),s("div",{staticClass:"content"},[s("span",{staticClass:"stress"},[t._v(t._s(t.seller.deliveryTime))]),t._v("分钟 ")])])]),s("div",{staticClass:"favorite",on:{click:t.toggleFavorite}},[s("span",{staticClass:"icon-favorite",class:{active:t.favorite}}),s("span",{staticClass:"text"},[t._v(t._s(t.favoriteText))])])]),s("split"),s("div",{staticClass:"bulletin"},[s("h1",{staticClass:"title"},[t._v("公告与活动")]),s("div",{staticClass:"content-wrapper border-bottom-1px"},[s("p",{staticClass:"content"},[t._v(t._s(t.seller.bulletin))])]),t.seller.supports?s("ul",{staticClass:"supports"},t._l(t.seller.supports,(function(e,a){return s("li",{key:a,staticClass:"support-item border-bottom-1px"},[s("support-ico",{attrs:{size:4,type:t.seller.supports[a].type}}),s("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[a].description))])],1)})),0):t._e()]),s("split"),s("div",{staticClass:"pics"},[s("h1",{staticClass:"title"},[t._v("商家实景")]),s("cube-scroll",{staticClass:"pic-wrapper",attrs:{options:t.picScrollOptions}},[s("ul",{staticClass:"pic-list"},t._l(t.seller.pics,(function(t,e){return s("li",{key:e,staticClass:"pic-item"},[s("img",{attrs:{src:t,width:"120",height:"90"}})])})),0)])],1),s("split"),s("div",{staticClass:"info"},[s("h1",{staticClass:"title border-bottom-1px"},[t._v("商家信息")]),s("ul",t._l(t.seller.infos,(function(e,a){return s("li",{key:a,staticClass:"info-item border-bottom-1px"},[t._v(" "+t._s(e)+" ")])})),0)])],1)])},Ut=[],Vt=s("335a"),Wt="__seller__";function Xt(t,e,s){var a=Vt["a"].get(Wt,{});a[t]||(a[t]={}),a[t][e]=s,Vt["a"].set(Wt,a)}function qt(t,e,s){var a=Vt["a"].get(Wt,{});return a[t]&&a[t][e]||s}var Gt={props:{data:{type:Object,default:function(){return{}}}},data:function(){return{favorite:!1,sellerScrollOptions:{directionLockThreshold:0,click:!1},picScrollOptions:{scrollX:!0,stopPropagation:!0,directionLockThreshold:0}}},computed:{seller:function(){return this.data.seller||{}},favoriteText:function(){return this.favorite?"已收藏":"收藏"}},created:function(){this.favorite=qt(this.seller.id,"favorite",!1)},methods:{toggleFavorite:function(){this.favorite=!this.favorite,Xt(this.seller.id,"favorite",this.favorite)}},components:{SupportIco:h,Star:_t,Split:Dt}},Kt=Gt,Qt=(s("534e"),Object(p["a"])(Kt,Jt,Ut,!1,null,"4cbb72a4",null)),Zt=Qt.exports,te=s("72bf"),ee=s.n(te),se={name:"app",data:function(){return{seller:{id:ee.a.parse(location.search).id}}},created:function(){var t=this;this._getSeller(),j().then((function(e){t.seller=e}))},computed:{tabs:function(){return[{label:"商品",component:ot,data:{seller:this.seller}},{label:"评论",component:Ht,data:{seller:this.seller}},{label:"商家",component:Zt,data:{seller:this.seller}}]}},methods:{test:function(){window.console.log(this.seller)},_getSeller:function(){var t=this;j({id:this.seller.id}).then((function(e){t.seller=Object.assign({},t.seller,e)}))}},components:{VHeader:_,tab:k}},ae=se,ie=(s("7faf"),Object(p["a"])(ae,i,n,!1,null,null,null)),ne=ie.exports,oe=(s("df49"),s("e7bd")),re=s("0c29"),ce=s("cd5d"),le=s("6f24"),ue=s("2696"),de=s("7c8a"),pe=s("ae0c"),fe=s("47fe"),he=s("4403"),ve=s("1cf7"),me=s("7add"),Ce=s("84d6"),_e=s("d2c1"),be=s("291f"),ye=s("7ced"),ge=s("09ad"),we=s("81c3"),xe=s("6fe1"),ke=s("a801"),Se=s("031d"),$e=s("63b4"),Te=s("9173"),Oe=s("8344"),Pe=s("664d"),je=s("0124"),Fe=s("9736"),Ne=s("1cc1"),Ee=s("e231"),Le=s("aea1"),De=s("5f4e"),ze=s("0679"),Be=s("2799"),Re=s("bdd9"),Me=s("a2d2"),Ae=s("ba90"),Ie=s("36b6"),Ye=s("0f85");a["a"].use(oe["a"]),a["a"].use(re["a"]),a["a"].use(ce["a"]),a["a"].use(le["a"]),a["a"].use(ue["a"]),a["a"].use(de["a"]),a["a"].use(pe["a"]),a["a"].use(fe["a"]),a["a"].use(he["a"]),a["a"].use(ve["a"]),a["a"].use(me["a"]),a["a"].use(Ce["a"]),a["a"].use(_e["a"]),a["a"].use(be["a"]),a["a"].use(ye["a"]),a["a"].use(ge["a"]),a["a"].use(we["a"]),a["a"].use(xe["a"]),a["a"].use(ke["a"]),a["a"].use(Se["a"]),a["a"].use($e["a"]),a["a"].use(Te["a"]),a["a"].use(Oe["a"]),a["a"].use(Pe["a"]),a["a"].use(je["a"]),a["a"].use(Fe["a"]),a["a"].use(Ne["a"]),a["a"].use(Ee["a"]),a["a"].use(Le["a"]),a["a"].use(De["a"]),a["a"].use(ze["a"]),a["a"].use(Be["a"]),a["a"].use(Re["a"]),a["a"].use(Me["a"]),a["a"].use(Ae["a"]),a["a"].use(Ie["a"]),a["a"].use(Ye["a"]);var He=s("df9a"),Je=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"header-detail",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}},[s("div",{staticClass:"detail-wrapper clear-fix"},[s("div",{staticClass:"detail-main"},[s("h1",{staticClass:"name"},[t._v(t._s(t.seller.name))]),s("div",{staticClass:"star-wrapper"},[s("star",{attrs:{size:48,score:t.seller.score}})],1),s("div",{staticClass:"title"},[s("div",{staticClass:"line"}),s("div",{staticClass:"text"},[t._v("优惠信息")]),s("div",{staticClass:"line"})]),t.seller.supports?s("ul",{staticClass:"supports"},t._l(t.seller.supports,(function(e,a){return s("li",{key:e.id,staticClass:"support-item"},[s("support-ico",{attrs:{size:2,type:t.seller.supports[a].type}}),s("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[a].description))])],1)})),0):t._e(),s("div",{staticClass:"title"},[s("div",{staticClass:"line"}),s("div",{staticClass:"text"},[t._v("商家公告")]),s("div",{staticClass:"line"})]),s("div",{staticClass:"bulletin"},[s("p",{staticClass:"content"},[t._v(t._s(t.seller.bulletin))])])])]),s("div",{staticClass:"detail-close",on:{click:t.hide}},[s("i",{staticClass:"icon-close"})])])])},Ue=[],Ve="show",We="hide",Xe={data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0,this.$emit(Ve)},hide:function(){this.visible=!1,this.$emit(We)}}},qe={name:"header-detail",mixins:[Xe],props:{seller:{type:Object,default:function(){return{}}}},data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1}},components:{SupportIco:h,Star:_t}},Ge=qe,Ke=(s("108f"),Object(p["a"])(Ge,Je,Ue,!1,null,"2120abd6",null)),Qe=Ke.exports,Ze=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade",appear:""}},[s("cube-popup",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{"mask-closable":!0,position:"bottom",type:"shop-cart-list","z-index":90},on:{"mask-click":t.maskClick}},[s("transition",{attrs:{name:"move",appear:""},on:{"after-leave":t.afterLeave}},[t.visible?s("div",[s("div",{staticClass:"list-header"},[s("h1",{staticClass:"title"},[t._v("购物车")]),s("span",{staticClass:"empty",on:{click:t.empty}},[t._v("清空")])]),s("cube-scroll",{ref:"listContent",staticClass:"list-content"},[s("ul",t._l(t.selectFoods,(function(e,a){return s("li",{key:a,staticClass:"food"},[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),s("div",{staticClass:"price"},[s("span",[t._v("￥"+t._s(e.price*e.count))])]),s("div",{staticClass:"cart-control-wrapper"},[s("cart-control",{attrs:{food:e},on:{add:t.onAdd}})],1)])})),0)])],1):t._e()])],1)],1)},ts=[],es="show",ss="add",as="leave",is={name:"shop-cart-list",mixins:[Xe],props:{selectFoods:{type:Array,default:function(){return[]}}},created:function(){var t=this;this.$on(es,(function(){t.$nextTick((function(){t.$refs.listContent.refresh()}))}))},methods:{show:function(){var t=this;this.visible=!0,this.$nextTick((function(){t.$refs.listContent.refresh()}))},onAdd:function(t){this.$emit(ss,t)},afterLeave:function(){this.$emit(as)},maskClick:function(){this.hide()},empty:function(){var t=this;this.dialogComp=this.$createDialog({type:"confirm",content:"清空购物车？",$events:{confirm:function(){t.selectFoods.forEach((function(t){t.count=0})),t.hide()}}}),this.dialogComp.show()}},components:{CartControl:st}},ns=is,os=(s("88e7"),Object(p["a"])(ns,Ze,ts,!1,null,"73ed7c36",null)),rs=os.exports,cs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"shop-cart-sticky"},[s("shop-cart",{ref:"shopCart",attrs:{selectFoods:t.selectFoods,deliveryPrice:t.deliveryPrice,minPrice:t.minPrice,fold:t.fold,sticky:!0}})],1)},ls=[],us={name:"shop-cart-sticky",mixins:[Xe],props:{selectFoods:{type:Array,default:function(){return[]}},deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0},fold:{type:Boolean,default:!0},list:{type:Object,default:function(){return{}}}},methods:{drop:function(t){this.$refs.shopCart.drop(t)}},components:{ShopCart:q}},ds=us,ps=(s("547b"),Object(p["a"])(ds,cs,ls,!1,null,"c75aca70",null)),fs=ps.exports,hs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"move"},on:{"after-leave":t.afterLeave}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"food"},[s("cube-scroll",{ref:"scroll"},[s("div",{staticClass:"food-content"},[s("div",{staticClass:"image-header"},[s("img",{attrs:{src:t.food.image}}),s("div",{staticClass:"back",on:{click:t.hide}},[s("i",{staticClass:"icon-arrow_lift"})])]),s("div",{staticClass:"content"},[s("h1",{staticClass:"title"},[t._v(t._s(t.food.name))]),s("div",{staticClass:"detail"},[s("span",{staticClass:"sell-count"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),s("span",{staticClass:"rating"},[t._v("好评率"+t._s(t.food.rating)+"%")])]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(t.food.price))]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(t.food.oldPrice))])]),s("div",{staticClass:"cart-control-wrapper"},[s("CartControl",{attrs:{food:t.food},on:{add:t.addFood}})],1),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.food.count,expression:"!food.count"}],staticClass:"buy",on:{click:t.addFirst}},[t._v(" 加入购物车 ")])])],1),s("split",{directives:[{name:"show",rawName:"v-show",value:t.food.info,expression:"food.info"}]}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.info,expression:"food.info"}],staticClass:"info"},[s("h1",{staticClass:"title"},[t._v("商品信息")]),s("p",{staticClass:"text"},[t._v(t._s(t.food.info))])]),s("split"),s("div",{staticClass:"rating"},[s("h1",{staticClass:"title"},[t._v("商品评价")]),s("rating-select",{attrs:{selectType:t.selectType,onlyContent:t.onlyContent,desc:t.desc,ratings:t.ratings},on:{select:t.onSelect,toggle:t.onToggle}}),s("div",{staticClass:"rating-wrapper"},[s("ul",{directives:[{name:"show",rawName:"v-show",value:t.computedRatings&&t.computedRatings.length,expression:"computedRatings && computedRatings.length"}]},t._l(t.computedRatings,(function(e,a){return s("li",{key:a,staticClass:"rating-item border-bottom-1px"},[s("div",{staticClass:"user"},[s("span",{staticClass:"name"},[t._v(t._s(e.username))]),s("img",{staticClass:"avatar",attrs:{width:"12",height:"12",src:e.avatar}})]),s("div",{staticClass:"time"},[t._v(t._s(t.format(e.rateTime)))]),s("p",{staticClass:"text"},[s("span",{class:{"icon-thumb_up":0===e.rateType,"icon-thumb_down":1===e.rateType}}),t._v(t._s(e.text)+" ")])])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.computedRatings||!t.computedRatings.length,expression:"!computedRatings || !computedRatings.length"}],staticClass:"no-rating"},[t._v("暂无评价")])])],1)],1)])],1)])},vs=[],ms="show",Cs="add",_s="leave",bs=2,ys={name:"food",mixins:[Bt,Xe],props:{food:{type:Object}},data:function(){return{onlyContent:!0,selectType:bs,desc:{all:"全部",positive:"推荐",negative:"吐槽"}}},computed:{ratings:function(){return this.food.ratings}},computedRatings:function(){var t=this,e=[];return this.ratings.forEach((function(s){t.onlyContent&&!s.text||t.selectType!==bs&&t.selectType!==s.rateType||e.push(s)})),e},created:function(){var t=this;this.$on(ms,(function(){t.$nextTick((function(){t.$refs.scroll.refresh()}))}))},methods:{afterLeave:function(){this.$emit(_s)},onSelect:function(t){this.selectType=t},onToggle:function(){this.onlyContent=!this.onlyContent},addFirst:function(t){this.$set(this.food,"count",1),this.$emit(Cs,t.target)},addFood:function(t){this.$emit(Cs,t)},format:function(t){return Mt()(t).format("YYYY-MM-DD hh:mm")}},components:{CartControl:st,RatingSelect:Pt,Split:Dt}},gs=ys,ws=(s("16b8"),Object(p["a"])(gs,hs,vs,!1,null,"2a79cb88",null)),xs=ws.exports;Object(He["a"])(a["a"],Qe),Object(He["a"])(a["a"],rs),Object(He["a"])(a["a"],fs),Object(He["a"])(a["a"],xs);s("f867");a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(ne)}}).$mount("#app")},5717:function(t,e,s){"use strict";var a=s("2cca"),i=s.n(a);i.a},"5d9c":function(t,e,s){var a={"./zh-cn":"5c3a","./zh-cn.js":"5c3a"};function i(t){var e=n(t);return s(e)}function n(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=n,t.exports=i,i.id="5d9c"},"5e8b":function(t,e,s){},"61d8":function(t,e,s){},"6d03":function(t,e,s){},"77ce":function(t,e,s){"use strict";var a=s("178d"),i=s.n(a);i.a},"7c34":function(t,e,s){},"7faf":function(t,e,s){"use strict";var a=s("b8ff"),i=s.n(a);i.a},"88e7":function(t,e,s){"use strict";var a=s("20ee"),i=s.n(a);i.a},"8f0f":function(t,e,s){"use strict";var a=s("b04d"),i=s.n(a);i.a},a734:function(t,e,s){"use strict";var a=s("cf5f"),i=s.n(a);i.a},b04d:function(t,e,s){},b771:function(t,e,s){"use strict";var a=s("1fe4"),i=s.n(a);i.a},b8ff:function(t,e,s){},c3f1:function(t,e,s){},c78d:function(t,e,s){"use strict";var a=s("424c"),i=s.n(a);i.a},cf5f:function(t,e,s){},e990:function(t,e,s){"use strict";var a=s("c3f1"),i=s.n(a);i.a},f867:function(t,e,s){},ffd6:function(t,e,s){}});
//# sourceMappingURL=app.354427ad.js.map